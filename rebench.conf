# Config file for ReBench
# Config format is YAML (see http://yaml.org/ for detailed spec)

# this run definition will be choosen if no parameters are given to rebench.py
standard_run: all
standard_data_file: 'savina.data'
standard_experiment: Savina

reporting:
    csv_file: latest-runs.csv
    csv_locale: de_DE.UTF-8

runs:
    number_of_data_points: 3

statistics:
    confidence_level: 0.95
 
# settings for quick runs, useful for fast feedback during experiments
quick_runs:
    number_of_data_points: 3
    max_time: 60   # time in seconds

# definition of benchmark suites
benchmark_suites:
    Savina:
        gauge_adapter: SavinaLog
        location: .
        command: " -Dhj.maxThreads=%(cores)s -Dhj.numWorkers=%(cores)s -Dactors.corePoolSize=%(cores)s -Dactors.maxPoolSize=%(cores)s edu.rice.habanero.benchmarks.%(benchmark)s%(variable)sBenchmark -iter 10 "
        max_runtime: 600
        variable_values:
            - AkkaActor
            - FuncJavaActor
            - GparsActor
            - HabaneroActor
            # - HabaneroSelector
            - JetlangActor
            - JumiActor
            # - LiftActor
            # - ScalaActor
            - ScalazActor
        cores: [1, 2, 4, 8]
        benchmarks:
            # Bitonic sort??
            # Fibonacci??

            # Microbenchmarks
            - PingPong:
                command: pingpong.PingPong
            - Counting:
                command: count.Counting
            - ForkJoinThroughput:
                command: fjthrput.Throughput
                extra_args: " -n 1000 "
            - ForkJoinActorCreation:
                command: fjcreate.ForkJoin
            - ThreadRing:
                command: threadring.ThreadRing
            - Chameneos:
                command: chameneos.Chameneos
                extra_args: " -m 40000 "
            - BigContention:
                command: big.Big
                extra_args: " -n 2000 "

            ## Concurrency
            - ConcurrentDictionary:
                command: concdict.Dictionary
            - ConcurrentSortedLinkedList:
                command: concsll.SortedList
                extra_args: " -m 1000 "
            - ProducerConsumerBoundedBuffer:
                command: bndbuffer.ProdCons
                extra_args: " -np 20 -nc 20 -pc 15 -cc 15 -ipp 30 "
            - DiningPhilosophers:
                command: philosopher.Philosopher
            - SleepingBarber:
                command: barber.SleepingBarber
                extra_args: " -n 1500 "
            - CigaretteSmokers:
                command: cigsmok.CigaretteSmoker
            - LogisticMapSeries:
                command: logmap.LogisticMap
                extra_args: " -t 8000 "
            - BankTransaction:
                command: banking.Banking
                extra_args: " -n 10000 -a 500 "

            ## Parallelism
            - RadixSort:
                command: radixsort.RadixSort
                extra_args: " -n 10000 "
            - FilterBank:
                command: filterbank.FilterBank
                extra_args: " -sim 16384"
            - SieveOfEratosthenes:
                command: sieve.Sieve
            - UnbalancedCobwebbedTree: 
                command: uct.Uct
                extra_args: " -nodes 10000 "
            - OnlineFacilityLocation:
                command: facloc.FacilityLocation
                extra_args: " -n 30000 "
            - TrapezoidalApproximation:
                command: trapezoid.Trapezoidal
                extra_args: " -n 200000 "
            - PrecisePiComputation:
                command: piprecision.PiPrecision
                extra_args: " -p 2000 "
            - RecursiveMatrixMultiplication:
                command: recmatmul.MatMul
                extra_args: " -n 400 "
            - Quicksort:
                command: quicksort.QuickSort
                extra_args: " -n 100000 "
            - AllPairsShortestPath:
                command: apsp.Apsp
                extra_args: " -n 100 "
            - SuccessiveOverRelaxation:
                command: sor.SucOverRelax
            - AStarSearch:
                command: astar.GuidedSearch
            - NQueens:
                command: nqueenk.NQueens
                extra_args: " -n 11 "

    savina-som:
        gauge_adapter: SavinaLog
        location: .
        command: " -Dhj.maxThreads=%(cores)s -Dhj.numWorkers=%(cores)s -Dactors.corePoolSize=%(cores)s -Dactors.maxPoolSize=%(cores)s edu.rice.habanero.benchmarks.%(benchmark)s%(variable)sBenchmark -iter 10 "
        max_runtime: 600
        variable_values:
            - AkkaActor
            - JetlangActor
            - ScalazActor
        cores: [1, 2, 4, 6, 8]
        benchmarks:
            # Microbenchmarks
            - PingPong:
                command: pingpong.PingPong
                extra_args: " -n 40000 "
            - Counting:
                command: count.Counting
                extra_args: " -n 200000 "
            - ForkJoinThroughput:
                command: fjthrput.Throughput
                extra_args: " -n 3000 -a 60 "
            - ForkJoinActorCreation:
                command: fjcreate.ForkJoin
                extra_args: " -n 40000 "
            - ThreadRing:
                command: threadring.ThreadRing
                extra_args: " -n 100 -r 100000 "
            - Chameneos:
                command: chameneos.Chameneos
                extra_args: " -m 100000 -c 100 "
            - BigContention:
                command: big.Big
                extra_args: " -n 2000 -w 120 "

            ## Concurrency
            - ConcurrentDictionary:
                command: concdict.Dictionary
                extra_args: " -e 20 -m 1000 -w 20 "
            - ConcurrentSortedLinkedList:
                command: concsll.SortedList
                extra_args: " -e 10 -m 1500 -w 10 -s 1 "
            - ProducerConsumerBoundedBuffer:
                command: bndbuffer.ProdCons
                extra_args: " -bb 40 -np 10 -nc 10 -ipp 60 -pc 25 -cc 25  "
            - Philosophers:
                command: philosopher.Philosopher
                extra_args: " -n 20 -m 5000 "
            - SleepingBarber:
                command: barber.SleepingBarber
                extra_args: " -n 2500 -w 1000 -pr 1000 -hr 1000 "
            - CigaretteSmokers:
                command: cigsmok.CigaretteSmoker
                extra_args: " -r 10000 -s 200 "
            - LogisticMapSeries:
                command: logmap.LogisticMap
                extra_args: " -t 25000 -s 10 -r 3.46 "
            - BankTransaction:
                command: banking.Banking
                extra_args: " -n 100000 -a 1000 "

            ## Parallelism
            - RadixSort:
                command: radixsort.RadixSort
                extra_args: " -n 50000 -m 65536 -s 74755 "
            # - FilterBank:
            #     command: filterbank.FilterBank
            #     extra_args: " -sim 16384"
            # - SieveOfEratosthenes:
            #     command: sieve.Sieve
            - UnbalancedCobwebbedTree: 
                command: uct.Uct
                extra_args: " -binomial 10 -avg 500 -stdev 100 -nodes 100000 "
            # - OnlineFacilityLocation:
            #     command: facloc.FacilityLocation
            #     extra_args: " -n 30000 "
            - TrapezoidalApproximation:
                command: trapezoid.Trapezoidal
                extra_args: " -w 100 -n 1000000 -l 1 -r 5 "
            # - PrecisePiComputation:
            #     command: piprecision.PiPrecision
            #     extra_args: " -p 2000 "
            # - RecursiveMatrixMultiplication:
            #     command: recmatmul.MatMul
            #     extra_args: " -n 400 "
            # - Quicksort:
            #     command: quicksort.QuickSort
            #     extra_args: " -n 100000 "
            # - AllPairsShortestPath:
            #     command: apsp.Apsp
            #     extra_args: " -n 100 "
            # - SuccessiveOverRelaxation:
            #     command: sor.SucOverRelax
            #- AStarSearch:
            #    command: astar.GuidedSearch
            #    extra_args: " -w 100 -g 20 "
            - NQueens:
                command: nqueenk.NQueens
                extra_args: " -w 20 -n 10 -t 4 "



# VMs have a name and are specified by a path and the binary to be executed
virtual_machines:
    java:
        path: /usr/bin
        binary: java
        args: " -cp target/savina-0.0.1-SNAPSHOT-jar-with-dependencies.jar "

        
# define the benchmarks to be executed for a re-executable benchmark run
experiments:
    Savina:
        description: Run the Savina Actor benchmarks
        actions: benchmarks
        benchmark: savina-som
        executions: java
